#!/usr/bin/php
<?php
require_once dirname(__DIR__) . '/vendor/autoload.php';

if ($argc < 2) {
    die('Usage: vendor/bin/certainty-post-update-script /path/to/data/directory' . "\n");
}

try {
    (new \ParagonIE\Certainty\RemoteFetch($argv[1]))
        ->getLatestBundle(true, true);
    echo 'Remote Fetch of latest CACert Bundle [OK]', PHP_EOL;
    exit(0);
} catch (\Throwable $ex) {
    echo 'Remote Fetch of latest CACert Bundle [failure]', PHP_EOL;
    echo $ex->getMessage(), PHP_EOL;
    echo $ex->getTraceAsString(), PHP_EOL;
    exit(1);
}
